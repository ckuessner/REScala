reactive deposits = Source(0)
reactive withdrawals = Source(0)
reactive balance = Derived {deposits - withdrawals}

@transaction[deposits]
@requires amount > 0
@ensures deposits == old(deposits) + amount
transaction deposit(amount) = deposits.transform(_ + amount)

@transaction[(deposits,withdrawals)]
@requires amount > 0
@requires deposits - (withdrawals + amount) >= 0
@ensures withdrawals == old(withdrawals) + amount 
transaction withdraw(amount) = withdrawals.transform(_ + amount)

println("Ein Test.")
balance.observe(println("Changed to ", _))

deposit(100)